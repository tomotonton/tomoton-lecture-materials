# 09：継承とポリモーフィズム

---

## 🎯 このコマのねらい

- C++におけるクラスの継承を理解する
- 仮想関数を通じてポリモーフィズムの考え方を知る
- 共通機能と個別機能をクラスで整理する方法を学ぶ

---

## 📘 継承とは？

- 既存のクラス（親クラス・基底クラス）をもとに、新しいクラス（子クラス・派生クラス）を作る仕組み
- 親クラスの機能を子クラスが引き継ぐことで、共通部分を再利用できる

```cpp
class Character {
public:
    string name;
    void greet() {
        cout << "こんにちは、" << name << "です。" << endl;
    }
};

class Warrior : public Character {
public:
    void attack() {
        cout << name << " の剣攻撃！" << endl;
    }
};
```

---

## 💡 ポリモーフィズムとは？

- ポリモーフィズム（多態性）とは「同じ命令で違う動作をする」こと
- 親クラスのポインタで子クラスを扱うことで、共通インターフェースから異なる処理を実行できる

```cpp
class Character {
public:
    string name;
    virtual void action() {
        cout << name << " は何もしない。" << endl;
    }
};

class Warrior : public Character {
public:
    void action() override {
        cout << name << " は剣で攻撃！" << endl;
    }
};

class Mage : public Character {
public:
    void action() override {
        cout << name << " は魔法を唱えた！" << endl;
    }
};

void perform(Character* c) {
    c->action();
}
```

---

## 💻 実践ステップ

### 09_01_inheritance.cpp（クラスの継承）
```cpp
#include <iostream>
using namespace std;

class Character {
public:
    string name;
    void greet() {
        cout << "こんにちは、" << name << "です。" << endl;
    }
};

class Warrior : public Character {
public:
    void attack() {
        cout << name << " の剣攻撃！" << endl;
    }
};

int main() {
    Warrior w;
    w.name = "戦士";
    w.greet();
    w.attack();
    return 0;
}
```

### 09_02_polymorphism.cpp（仮想関数とポリモーフィズム）
```cpp
#include <iostream>
using namespace std;

class Character {
public:
    string name;
    virtual void action() {
        cout << name << " は何もしない。" << endl;
    }
};

class Warrior : public Character {
public:
    void action() override {
        cout << name << " は剣で攻撃！" << endl;
    }
};

class Mage : public Character {
public:
    void action() override {
        cout << name << " は魔法を唱えた！" << endl;
    }
};

void perform(Character* c) {
    c->action();
}

int main() {
    Warrior w;
    w.name = "戦士";
    Mage m;
    m.name = "魔法使い";

    perform(&w);
    perform(&m);
    return 0;
}
```

---

## 🔍 演習問題

1. `Character` クラスを継承して `Thief` クラスを作成し、`action()` をオーバーライドしてください。
2. `Character` クラスに `showName()` 関数を追加し、すべての派生クラスでも呼び出せるようにしてください。
3. `perform()` 関数で `Thief` も動作確認してください。

---

## ✅ まとめ

- 継承で共通処理をまとめられる
- 仮想関数で派生クラスごとの処理を書き換えられる
- ゲームのように「職業ごとに異なる行動」が必要な場合に有効

