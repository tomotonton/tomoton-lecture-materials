# 08：クラスの定義と使い方（オブジェクト指向の基本）

---

## 🎯 このコマのねらい

- C++におけるクラスの定義と使い方を理解する
- オブジェクト指向の基本的な考え方を知る
- クラスの書式、使い方、構造を具体的に学ぶ

---

## 💡 オブジェクト指向とは？

### プログラミングの進化の中で生まれた考え方

- 昔のプログラムは、処理が散らかって「スパゲッティコード」に陥りやすかった
- C言語では「関数」で処理を整理できるようになった（構造化プログラミング）
- プログラムの大規模化とともに、関数だけでは管理しきれなくなった
- データと処理を1つの「オブジェクト」として扱う「オブジェクト指向」が誕生した

### 特にゲーム開発と相性が良い

- ゲームには「プレイヤー」「敵」「アイテム」「マップ」など、現実世界に似た“モノ”が登場する
- それぞれに名前、位置、状態などの「データ」と、それを操作する「処理」がある
- クラスで設計し、オブジェクトとして生成するのが自然なスタイル

---

## 📘 クラスとは？

- クラスは「自作のデータ型」であり、設計図にあたる
- クラスを使って作るオブジェクトが「インスタンス（実体）」
- `Player` や `Enemy` など、ゲームで出てくるモノの設計図として使える

---

## 🧱 クラスの基本構文

### クラスの定義（設計図の作成）
```cpp
class クラス名 {
public:
    // メンバ変数
    // メンバ関数
};
```

### クラスの使用（オブジェクトの生成）
```cpp
クラス名 変数名;
変数名.メンバ変数 = 値;
変数名.メンバ関数();
```

---

## 💡 用語の整理

※ Javaなどで「メソッド」と呼ばれるものも、C++では「メンバ関数」と言います。

| 用語           | 意味                                      |
|----------------|-------------------------------------------|
| クラス         | 設計図。変数＋関数をまとめた「型」       |
| インスタンス   | クラスから作られた実体（オブジェクト）   |
| メンバ変数     | クラス内で定義される変数                  |
| メンバ関数     | クラス内で定義される関数（Javaで言うメソッド）|
| コンストラクタ | オブジェクト生成時に自動実行される関数   |
| デストラクタ   | オブジェクト破棄時に自動実行される関数   |

---

## 💻 実践ステップ

### 08_01_class_basic.cpp（複数キャラのインスタンス）
```cpp
#include <iostream>
using namespace std;

class Player {
public:
    string name;
    int hp;

    void showStatus() {
        cout << name << " のHP: " << hp << endl;
    }
};

int main() {
    Player warrior;
    warrior.name = "戦士";
    warrior.hp = 120;
    warrior.showStatus();

    Player priest;
    priest.name = "僧侶";
    priest.hp = 80;
    priest.showStatus();

    Player thief;
    thief.name = "盗賊";
    thief.hp = 90;
    thief.showStatus();

    return 0;
}
```

### 08_02_constructor.cpp（コンストラクタ）

> 🔍 コンストラクタとは？
>
> コンストラクタは、クラスからオブジェクトが生成されるときに自動で呼ばれる関数です。
> - 関数名はクラス名と同じになります。
> - 戻り値は不要（voidも書かない）。
> - 主に変数の初期化に使われます。
> - オブジェクト生成と同時に値を渡せるため、初期設定のミスを防げます。
```cpp
#include <iostream>
using namespace std;

class Player {
public:
    string name;
    int hp;

    // コンストラクタ：オブジェクト生成時に呼ばれる初期化関数
    Player(string n, int h) {
        name = n;
        hp = h;
    }

    void showStatus() {
        cout << name << " のHP: " << hp << endl;
    }
};

int main() {
    Player p("魔法使い", 60);
    p.showStatus();
    return 0;
}
```

### 08_03_private.cpp（privateでカプセル化）
```cpp
#include <iostream>
using namespace std;

class Player {
private:
    int hp;

public:
    string name;
    Player(string n, int h) {
        name = n;
        hp = h;
    }
    void showStatus() {
        cout << name << " のHP: " << hp << endl;
    }
};

int main() {
    Player p("忍者", 70);
    // p.hp = 999; // エラー：privateのためアクセス不可
    p.showStatus();
    return 0;
}
```

---

## 💡 用語の整理

※ Javaなどで「メソッド」と呼ばれるものも、C++では「メンバ関数」と言います。

| 用語           | 意味                                      |
|----------------|-------------------------------------------|
| クラス         | 設計図。変数＋関数をまとめた「型」       |
| インスタンス   | クラスから作られた実体（オブジェクト）   |
| メンバ変数     | クラス内で定義される変数                  |
| メンバ関数     | クラス内で定義される関数（Javaで言うメソッド）|
| コンストラクタ | オブジェクト生成時に自動実行される関数   |
| デストラクタ   | オブジェクト破棄時に自動実行される関数   |

---

## 🔍 演習問題

1. `Book` クラスを作成してください。
   - メンバ変数：`title`（string）, `author`（string）, `price`（int）
   - メンバ関数：`showInfo()`（書籍情報を表示する）
   - ファイル名：08_04_book_class.cpp

2. `Enemy` クラスを作成してください。
   - メンバ変数：`name`（string）, `hp`（int）
   - メンバ関数：`damage(int d)`（dのダメージを受ける）, `showHp()`（HPを表示する）
   - ファイル名：08_05_enemy_class.cpp

3. `Player` クラスの `hp` を `private` にし、外部から直接変更できないようにしてください。
   - `setHp(int h)` でHPを変更できるようにしてください
   - `getHp()` で現在のHPを取得できるようにしてください
   - ファイル名：08_06_encapsulation.cpp `Book` クラスを作り、タイトル・著者・価格を表示する関数を作る（08_04_book_class.cpp）
2. `Enemy` クラスを作り、ダメージを与える関数とHP表示関数を実装（08_05_enemy_class.cpp）
3. HPを `private` にし、`setHp()` 関数経由でのみ変更可能にする（08_06_encapsulation.cpp）

---

## ✅ まとめ

- クラスは変数と関数をまとめた「型」であり、現実のモノを模して設計できる
- オブジェクト指向はゲーム開発に適した考え方
- インスタンス生成やコンストラクタで、キャラクターの初期設定が簡単に行える
- アクセス修飾子（public/private）を使って安全な設計ができる

